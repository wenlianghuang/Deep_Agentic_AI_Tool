# ç³»çµ±æ¶æ§‹

> ğŸ“š **ç›¸é—œæ–‡æª”**ï¼š[ä¸» README](README.md) | [æ¶æ§‹åˆ†é›¢èªªæ˜](ARCHITECTURE_SEPARATION.md) | [åŠŸèƒ½è©³è¿°](FEATURES.md)

æœ¬æ–‡æª”è©³ç´°èªªæ˜ Deep Agentic AI Tool çš„ç³»çµ±æ¶æ§‹ã€çµ„ä»¶è¨­è¨ˆå’Œå·¥ä½œæµç¨‹ã€‚

**æç¤º**ï¼šå¦‚æœæ‚¨æƒ³äº†è§£ç‚ºä»€éº¼æ·±åº¦ç ”ç©¶ä»£ç†èˆ‡ Email/Calendar å·¥å…·æ˜¯åˆ†é›¢çš„ï¼Œè«‹åƒè€ƒ [æ¶æ§‹åˆ†é›¢èªªæ˜](ARCHITECTURE_SEPARATION.md)ã€‚

## ğŸ—ï¸ æ•´é«”æ¶æ§‹

ç³»çµ±æ¡ç”¨æ¨¡çµ„åŒ–è¨­è¨ˆï¼ŒåŸºæ–¼ LangGraph æ§‹å»ºï¼Œä¸»è¦çµ„ä»¶åŒ…æ‹¬ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Gradio Web UI                        â”‚
â”‚              (gradio_interface.py)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              LangGraph Agent Graph                       â”‚
â”‚              (agent_graph.py)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ Planner  â”‚â†’ â”‚Research  â”‚â†’ â”‚  Tools   â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚       â”‚             â”‚             â”‚                    â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                    â”‚                                    â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                             â”‚
â”‚              â”‚Note Taker â”‚                             â”‚
â”‚              â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                    â”‚                                    â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                             â”‚
â”‚              â”‚ Reporter  â”‚                             â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚            â”‚            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Tools   â”‚  â”‚   RAG   â”‚  â”‚    LLM     â”‚
â”‚           â”‚  â”‚ System  â”‚  â”‚  Utils     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ å°ˆæ¡ˆçµæ§‹è©³è§£

### æ ¸å¿ƒæ¨¡çµ„

#### `deep_agent_rag/agents/`

ä»£ç†ç¯€é»å¯¦ç¾ï¼Œæ¯å€‹ç¯€é»è² è²¬ç‰¹å®šçš„ä»»å‹™ï¼š

- **`planner.py`**ï¼šä»»å‹™è¦åŠƒç¯€é»
  - åˆ†æç”¨æˆ¶æŸ¥è©¢
  - è­˜åˆ¥æŸ¥è©¢é¡å‹ï¼ˆå­¸è¡“ã€è‚¡ç¥¨ã€ä¸€èˆ¬ï¼‰
  - ç”Ÿæˆä»»å‹™åˆ—è¡¨
  - é¿å…ä¸å¿…è¦çš„å·¥å…·èª¿ç”¨

- **`researcher.py`**ï¼šç ”ç©¶åŸ·è¡Œç¯€é»
  - åŸ·è¡Œç ”ç©¶ä»»å‹™
  - å‹•æ…‹é¸æ“‡å·¥å…·
  - èª¿ç”¨å·¥å…·ä¸¦è™•ç†çµæœ
  - ç¶­è­·å°è©±ä¸Šä¸‹æ–‡

- **`note_taker.py`**ï¼šç­†è¨˜æ•´ç†ç¯€é»
  - æ•´ç†å·¥å…·è¿”å›çµæœ
  - ç”Ÿæˆç ”ç©¶ç­†è¨˜
  - æ·»åŠ åˆ°ç‹€æ…‹ä¸­çš„ç ”ç©¶ç­†è¨˜åˆ—è¡¨

- **`reporter.py`**ï¼šæœ€çµ‚å ±å‘Šç”Ÿæˆç¯€é»
  - ç¶œåˆæ‰€æœ‰ç ”ç©¶ç­†è¨˜
  - ç”Ÿæˆçµæ§‹åŒ–å ±å‘Š
  - æµå¼è¼¸å‡ºå ±å‘Šå…§å®¹

- **`email_agent.py`**ï¼šéƒµä»¶ç”Ÿæˆä»£ç†
  - æ ¹æ“šæç¤ºç”Ÿæˆéƒµä»¶è‰ç¨¿
  - æ”¯æ´ä¸­è‹±æ–‡
  - æ•´åˆåæ€è©•ä¼°

- **`email_reflection_agent.py`**ï¼šéƒµä»¶åæ€ä»£ç†
  - è©•ä¼°éƒµä»¶è³ªé‡
  - æä¾›æ”¹é€²å»ºè­°
  - ç”Ÿæˆæ”¹é€²ç‰ˆæœ¬

- **`calendar_agent.py`**ï¼šè¡Œäº‹æ›†äº‹ä»¶ç”Ÿæˆä»£ç†
  - è§£æäº‹ä»¶è³‡è¨Šï¼ˆæ—¥æœŸã€æ™‚é–“ã€åœ°é»ã€åƒèˆ‡è€…ï¼‰
  - ç”Ÿæˆäº‹ä»¶è‰ç¨¿
  - æ•´åˆ Google Maps é©—è­‰
  - æ•´åˆåæ€è©•ä¼°

- **`calendar_reflection_agent.py`**ï¼šè¡Œäº‹æ›†åæ€ä»£ç†
  - è©•ä¼°äº‹ä»¶å®Œæ•´æ€§
  - æä¾›æ”¹é€²å»ºè­°
  - ç”Ÿæˆæ”¹é€²ç‰ˆæœ¬ï¼ˆæœ€å¤š 3 è¼ªè¿­ä»£ï¼‰

- **`state.py`**ï¼šç‹€æ…‹å®šç¾©
  - `DeepAgentState`ï¼šç ”ç©¶ä»£ç†ç‹€æ…‹
  - åŒ…å«æŸ¥è©¢ã€æ¶ˆæ¯ã€ä»»å‹™ã€ç­†è¨˜ç­‰

#### `deep_agent_rag/graph/`

LangGraph åœ–è¡¨æ§‹å»ºï¼š

- **`agent_graph.py`**ï¼šåœ–è¡¨æ§‹å»ºèˆ‡è·¯ç”±
  - å®šç¾©ç¯€é»ä¹‹é–“çš„é€£æ¥
  - å¯¦ç¾æ¢ä»¶è·¯ç”±é‚è¼¯
  - ç®¡ç†æª¢æŸ¥é»ï¼ˆcheckpointï¼‰

**å·¥ä½œæµç¨‹ï¼š**
```
START â†’ Planner â†’ Research Agent
                    â†“
                  Tools (if needed)
                    â†“
              Note Taking
                    â†“
              Final Report â†’ END
```

#### `deep_agent_rag/tools/`

å·¥å…·å®šç¾©ï¼Œæä¾›å„ç¨®åŠŸèƒ½ï¼š

- **`agent_tools.py`**ï¼šç ”ç©¶å·¥å…·
  - `query_stock_info`ï¼šè‚¡ç¥¨æŸ¥è©¢
  - `search_web`ï¼šç¶²è·¯æœå°‹ï¼ˆTavilyï¼‰
  - `query_pdf_knowledge_base`ï¼šPDF çŸ¥è­˜åº«æŸ¥è©¢ï¼ˆRAGï¼‰

- **`email_tool.py`**ï¼šéƒµä»¶å·¥å…·
  - `send_email`ï¼šç™¼é€éƒµä»¶ï¼ˆGmail APIï¼‰

- **`calendar_tool.py`**ï¼šè¡Œäº‹æ›†å·¥å…·
  - `create_calendar_event`ï¼šå‰µå»ºäº‹ä»¶
  - `update_calendar_event`ï¼šæ›´æ–°äº‹ä»¶
  - `delete_calendar_event`ï¼šåˆªé™¤äº‹ä»¶

- **`googlemaps_tool.py`**ï¼šGoogle Maps å·¥å…·
  - `enrich_location_info`ï¼šåœ°é»é©—è­‰èˆ‡æ¨™æº–åŒ–
  - è¨ˆç®—äº¤é€šæ™‚é–“
  - å»ºè­°å‡ºç™¼æ™‚é–“

#### `deep_agent_rag/models/`

æ¨¡å‹åŒ…è£å™¨ï¼š

- **`mlx_chat_model.py`**ï¼šMLX æ¨¡å‹æ•´åˆ
  - å°‡ MLX æ¨¡å‹åŒ…è£ç‚º LangChain å…¼å®¹æ ¼å¼
  - æ”¯æ´æµå¼è¼¸å‡º
  - è™•ç†æ¨¡å‹è¼‰å…¥å’Œæ¨ç†

#### `deep_agent_rag/rag/`

RAG ç³»çµ±ï¼š

- **`rag_system.py`**ï¼šRAG åˆå§‹åŒ–å’Œæª¢ç´¢
  - PDF è¼‰å…¥å’Œåˆ†å¡Š
  - å‘é‡åŒ–ï¼ˆä½¿ç”¨ Jina embeddingsï¼‰
  - å‘é‡æ•¸æ“šåº«ï¼ˆChromaDBï¼‰
  - èªç¾©æœå°‹

#### `deep_agent_rag/ui/`

ç”¨æˆ¶ç•Œé¢ï¼š

- **`gradio_interface.py`**ï¼šGradio Web UI
  - ç ”ç©¶ä»£ç†ç•Œé¢
  - éƒµä»¶å·¥å…·ç•Œé¢
  - è¡Œäº‹æ›†å·¥å…·ç•Œé¢
  - æµå¼æ›´æ–°è™•ç†

#### `deep_agent_rag/utils/`

å·¥å…·å‡½æ•¸ï¼š

- **`llm_utils.py`**ï¼šLLM å¯¦ä¾‹ç®¡ç†
  - `get_llm()`ï¼šç²å– LLM å¯¦ä¾‹ï¼ˆè‡ªå‹•é¸æ“‡ Groq æˆ– MLXï¼‰
  - `handle_groq_error()`ï¼šè™•ç† Groq API éŒ¯èª¤
  - `is_using_local_llm()`ï¼šæª¢æŸ¥æ˜¯å¦ä½¿ç”¨æœ¬åœ°æ¨¡å‹
  - `get_llm_type()`ï¼šç²å–ç•¶å‰ LLM é¡å‹

#### `deep_agent_rag/config.py`

ç³»çµ±é…ç½®ï¼š

- MLX æ¨¡å‹é…ç½®
- RAG é…ç½®
- Agent é…ç½®
- API é…ç½®ï¼ˆGroqã€Gmailã€Calendarã€Google Mapsï¼‰
- å¤–éƒ¨ SSD è·¯å¾‘é…ç½®

## ğŸ”„ å·¥ä½œæµç¨‹è©³è§£

### æ·±åº¦ç ”ç©¶ä»£ç†å·¥ä½œæµç¨‹

```
1. ç”¨æˆ¶è¼¸å…¥æŸ¥è©¢
   â†“
2. Planner ç¯€é»
   - åˆ†ææŸ¥è©¢é¡å‹
   - ç”Ÿæˆä»»å‹™åˆ—è¡¨
   â†“
3. Research Agent ç¯€é»
   - é¸æ“‡åˆé©çš„å·¥å…·
   - èª¿ç”¨å·¥å…·
   â†“
4. Tools ç¯€é»ï¼ˆå¦‚æœéœ€è¦ï¼‰
   - åŸ·è¡Œå·¥å…·èª¿ç”¨
   - è¿”å›çµæœ
   â†“
5. Research Agent ç¯€é»ï¼ˆç¹¼çºŒï¼‰
   - è™•ç†å·¥å…·çµæœ
   - æ±ºå®šæ˜¯å¦éœ€è¦æ›´å¤šå·¥å…·èª¿ç”¨
   â†“
6. Note Taking ç¯€é»
   - æ•´ç†å·¥å…·çµæœ
   - ç”Ÿæˆç ”ç©¶ç­†è¨˜
   â†“
7. æª¢æŸ¥æ˜¯å¦é‚„æœ‰æœªå®Œæˆä»»å‹™
   - æ˜¯ â†’ è¿”å› Research Agent
   - å¦ â†’ ç¹¼çºŒ
   â†“
8. Final Report ç¯€é»
   - ç¶œåˆæ‰€æœ‰ç­†è¨˜
   - ç”Ÿæˆæœ€çµ‚å ±å‘Š
   â†“
9. è¿”å›çµæœçµ¦ç”¨æˆ¶
```

### éƒµä»¶ç”Ÿæˆå·¥ä½œæµç¨‹

```
1. ç”¨æˆ¶è¼¸å…¥éƒµä»¶æç¤ºå’Œæ”¶ä»¶äºº
   â†“
2. Email Agent
   - ç”Ÿæˆéƒµä»¶è‰ç¨¿ï¼ˆä¸»é¡Œå’Œæ­£æ–‡ï¼‰
   â†“
3. Email Reflection Agentï¼ˆå¯é¸ï¼‰
   - è©•ä¼°éƒµä»¶è³ªé‡
   - ç”Ÿæˆæ”¹é€²å»ºè­°
   - å¯é¸ç”Ÿæˆæ”¹é€²ç‰ˆæœ¬
   â†“
4. é¡¯ç¤ºçµæœçµ¦ç”¨æˆ¶
   - åŸå§‹ç‰ˆæœ¬
   - åæ€è©•ä¼°çµæœ
   - æ”¹é€²ç‰ˆæœ¬ï¼ˆå¦‚æœ‰ï¼‰
   â†“
5. ç”¨æˆ¶æª¢æŸ¥å’Œç·¨è¼¯
   â†“
6. ç”¨æˆ¶ç¢ºèªç™¼é€
   â†“
7. Email Tool
   - ä½¿ç”¨ Gmail API ç™¼é€éƒµä»¶
```

### è¡Œäº‹æ›†äº‹ä»¶ç”Ÿæˆå·¥ä½œæµç¨‹

```
1. ç”¨æˆ¶è¼¸å…¥äº‹ä»¶æç¤ºï¼ˆæˆ–ä½¿ç”¨å¿«é€Ÿé¸æ“‡ï¼‰
   â†“
2. Calendar Agent
   - è§£æäº‹ä»¶è³‡è¨Šï¼ˆæ—¥æœŸã€æ™‚é–“ã€åœ°é»ã€åƒèˆ‡è€…ï¼‰
   - ç”Ÿæˆäº‹ä»¶è‰ç¨¿
   â†“
3. Google Maps Toolï¼ˆå¦‚æœé…ç½®ï¼‰
   - é©—è­‰å’Œæ¨™æº–åŒ–åœ°å€
   - è¨ˆç®—äº¤é€šæ™‚é–“
   - å»ºè­°å‡ºç™¼æ™‚é–“
   â†“
4. Calendar Reflection Agentï¼ˆæœ€å¤š 3 è¼ªè¿­ä»£ï¼‰
   - ç¬¬ä¸€è¼ªï¼šè©•ä¼°äº‹ä»¶å®Œæ•´æ€§
   - å¦‚æœ‰æ”¹é€²å»ºè­° â†’ ç”Ÿæˆæ”¹é€²ç‰ˆæœ¬
   - ç¬¬äºŒè¼ªï¼šè©•ä¼°æ”¹é€²ç‰ˆæœ¬
   - å¦‚æœ‰æ”¹é€²å»ºè­° â†’ ç”Ÿæˆæ”¹é€²ç‰ˆæœ¬
   - ç¬¬ä¸‰è¼ªï¼šæœ€çµ‚è©•ä¼°
   â†“
5. æª¢æŸ¥ç¼ºå¤±è³‡è¨Š
   - å¦‚æœ‰ç¼ºå¤±ï¼ˆæ—¥æœŸã€æ™‚é–“ï¼‰â†’ é¡¯ç¤ºä¸‹æ‹‰é¸å–®
   - ç”¨æˆ¶é¸æ“‡å¾Œå¡«å……
   â†“
6. é¡¯ç¤ºçµæœçµ¦ç”¨æˆ¶
   - äº‹ä»¶è©³æƒ…
   - åæ€è©•ä¼°çµæœ
   - åœ°é»é©—è­‰è³‡è¨Šï¼ˆå¦‚æœ‰ï¼‰
   â†“
7. ç”¨æˆ¶æª¢æŸ¥å’Œç·¨è¼¯
   â†“
8. ç”¨æˆ¶ç¢ºèªå‰µå»º
   â†“
9. Calendar Tool
   - ä½¿ç”¨ Google Calendar API å‰µå»ºäº‹ä»¶
```

## ğŸ”Œ å¤–éƒ¨æœå‹™æ•´åˆ

### Groq API

- **ç”¨é€”**ï¼šå¿«é€Ÿ LLM æ¨ç†
- **æ¨¡å‹**ï¼š`llama-3.3-70b-versatile`
- **é…ç½®**ï¼š`GROQ_API_KEY` ç’°å¢ƒè®Šæ•¸
- **å‚™æ´**ï¼šè‡ªå‹•åˆ‡æ›åˆ°æœ¬åœ° MLX æ¨¡å‹

### Gmail API

- **ç”¨é€”**ï¼šç™¼é€éƒµä»¶
- **èªè­‰**ï¼šOAuth2
- **é…ç½®**ï¼š`GMAIL_CREDENTIALS_FILE`ã€`GMAIL_TOKEN_FILE`
- **æ¬Šé™**ï¼š`gmail.send`

### Google Calendar API

- **ç”¨é€”**ï¼šç®¡ç†è¡Œäº‹æ›†äº‹ä»¶
- **èªè­‰**ï¼šOAuth2ï¼ˆèˆ‡ Gmail å…±ç”¨æ†‘è­‰ï¼‰
- **é…ç½®**ï¼š`CALENDAR_CREDENTIALS_FILE`ã€`CALENDAR_TOKEN_FILE`
- **æ¬Šé™**ï¼š`calendar`

### Google Maps API

- **ç”¨é€”**ï¼šåœ°é»é©—è­‰å’Œäº¤é€šæ™‚é–“è¨ˆç®—
- **èªè­‰**ï¼šAPI Key
- **é…ç½®**ï¼š`NORMAL_GOOGLE_MAPS_API_KEY`
- **API**ï¼šGeocoding APIã€Directions API

### Tavily API

- **ç”¨é€”**ï¼šç¶²è·¯æœå°‹
- **èªè­‰**ï¼šAPI Key
- **é…ç½®**ï¼š`TAVILY_API_KEY`

### ChromaDB

- **ç”¨é€”**ï¼šå‘é‡æ•¸æ“šåº«ï¼ˆRAGï¼‰
- **å­˜å„²**ï¼šæœ¬åœ°æ–‡ä»¶ç³»çµ±
- **é…ç½®**ï¼šè‡ªå‹•ç®¡ç†

## ğŸ§© æ¨¡çµ„åŒ–è¨­è¨ˆ

### ç‹€æ…‹ç®¡ç†

ç³»çµ±ä½¿ç”¨ LangGraph çš„ç‹€æ…‹ç®¡ç†ï¼š

- **æª¢æŸ¥é»ï¼ˆCheckpointï¼‰**ï¼šä¿å­˜æœƒè©±ç‹€æ…‹
- **ç·šç¨‹ ID**ï¼šå€åˆ†ä¸åŒæœƒè©±
- **ç‹€æ…‹æŒä¹…åŒ–**ï¼šä½¿ç”¨ MemorySaver

### å·¥å…·ç³»çµ±

- **å‹•æ…‹å·¥å…·ç¶å®š**ï¼šåœ¨é‹è¡Œæ™‚ç¶å®šå·¥å…·åˆ° LLM
- **å·¥å…·è‡ªå‹•ç™¼ç¾**ï¼šé€šé `get_tools_list()` çµ±ä¸€ç®¡ç†
- **å·¥å…·çµæœè™•ç†**ï¼šè‡ªå‹•è™•ç†å’Œæ ¼å¼åŒ–

### LLM ç®¡ç†

- **å‹•æ…‹åˆ‡æ›**ï¼šé‹è¡Œæ™‚è‡ªå‹•åˆ‡æ› LLM å¾Œç«¯
- **éŒ¯èª¤è™•ç†**ï¼šè‡ªå‹•è™•ç† API éŒ¯èª¤ä¸¦åˆ‡æ›
- **çµ±ä¸€æ¥å£**ï¼šæ‰€æœ‰ç¯€é»ä½¿ç”¨ç›¸åŒçš„ LLM æ¥å£

## ğŸ”§ é–‹ç™¼æŒ‡å—

### æ·»åŠ æ–°å·¥å…·

1. **å‰µå»ºå·¥å…·å‡½æ•¸**

åœ¨ `deep_agent_rag/tools/` ä¸­å‰µå»ºæ–°æ–‡ä»¶æˆ–æ·»åŠ åˆ°ç¾æœ‰æ–‡ä»¶ï¼š

```python
from langchain_core.tools import tool

@tool
def my_new_tool(param: str) -> str:
    """å·¥å…·æè¿°ï¼ŒLLM æœƒçœ‹åˆ°é€™å€‹æè¿°"""
    # å¯¦ç¾é‚è¼¯
    return result
```

2. **æ·»åŠ åˆ°å·¥å…·åˆ—è¡¨**

åœ¨ `agent_tools.py` çš„ `get_tools_list()` å‡½æ•¸ä¸­æ·»åŠ ï¼š

```python
def get_tools_list(rag_retriever=None):
    tools = [
        query_stock_info,
        search_web,
        query_pdf_knowledge_base,
        my_new_tool,  # æ·»åŠ æ–°å·¥å…·
    ]
    # ...
```

3. **ä»£ç†è‡ªå‹•ä½¿ç”¨**

ä»£ç†æœƒè‡ªå‹•ç™¼ç¾ä¸¦ä½¿ç”¨æ–°å·¥å…·ï¼Œç„¡éœ€ä¿®æ”¹å…¶ä»–ä»£ç¢¼ã€‚

### æ·»åŠ æ–°ä»£ç†ç¯€é»

1. **å‰µå»ºç¯€é»å‡½æ•¸**

åœ¨ `deep_agent_rag/agents/` ä¸­å‰µå»ºæ–°æ–‡ä»¶ï¼š

```python
from ..agents.state import DeepAgentState

def my_new_node(state: DeepAgentState, llm=None):
    """æ–°ç¯€é»é‚è¼¯"""
    # è™•ç†ç‹€æ…‹
    # è¿”å›æ›´æ–°å¾Œçš„ç‹€æ…‹
    return {"messages": [...], ...}
```

2. **æ·»åŠ åˆ°åœ–è¡¨**

åœ¨ `agent_graph.py` çš„ `build_agent_graph()` å‡½æ•¸ä¸­ï¼š

```python
def my_node_wrapper(state):
    llm = get_llm()
    return my_new_node(state, llm=llm)

builder.add_node("my_node", my_node_wrapper)
builder.add_edge("previous_node", "my_node")
```

### ä¿®æ”¹ UI

ç·¨è¼¯ `gradio_interface.py`ï¼š

- **æ·»åŠ æ–°ç•Œé¢**ï¼šå‰µå»ºæ–°å‡½æ•¸ï¼ˆä¾‹å¦‚ï¼š`_create_my_interface()`ï¼‰
- **æ·»åŠ åˆ°ä¸»ç•Œé¢**ï¼šåœ¨ `create_gradio_interface()` ä¸­æ·»åŠ  Tab
- **è™•ç†äº‹ä»¶**ï¼šä½¿ç”¨ Gradio çš„äº‹ä»¶è™•ç†æ©Ÿåˆ¶

### é…ç½®ç®¡ç†

æ‰€æœ‰é…ç½®åœ¨ `config.py` ä¸­ï¼š

- **æ·»åŠ æ–°é…ç½®**ï¼šç›´æ¥æ·»åŠ è®Šæ•¸
- **ç’°å¢ƒè®Šæ•¸**ï¼šä½¿ç”¨ `os.getenv()` è®€å–
- **é è¨­å€¼**ï¼šæä¾›åˆç†çš„é è¨­å€¼

## ğŸš€ æ€§èƒ½å„ªåŒ–

### LLM é¸æ“‡

- **Groq API**ï¼šå¿«é€Ÿï¼Œé©åˆç”Ÿç”¢ç’°å¢ƒ
- **æœ¬åœ° MLX**ï¼šéš±ç§ä¿è­·ï¼Œé©åˆæ•æ„Ÿå ´æ™¯
- **è‡ªå‹•åˆ‡æ›**ï¼šæ ¹æ“šå¯ç”¨æ€§è‡ªå‹•é¸æ“‡

### ç·©å­˜ç­–ç•¥

- **æ¨¡å‹ç·©å­˜**ï¼šä½¿ç”¨å¤–éƒ¨ SSDï¼ˆå¦‚æœé…ç½®ï¼‰
- **RAG å‘é‡åº«**ï¼šæŒä¹…åŒ–åˆ°æœ¬åœ°
- **OAuth Token**ï¼šè‡ªå‹•åˆ·æ–°

### ä¸¦ç™¼è™•ç†

- **Gradio æœƒè©±**ï¼šæ¯å€‹ç”¨æˆ¶ç¨ç«‹çš„ thread_id
- **ç‹€æ…‹éš”é›¢**ï¼šä½¿ç”¨æª¢æŸ¥é»ç³»çµ±
- **å·¥å…·èª¿ç”¨**ï¼šé †åºåŸ·è¡Œï¼Œé¿å…è¡çª

## ğŸ”’ å®‰å…¨è€ƒæ…®

1. **æ†‘è­‰ç®¡ç†**
   - æ†‘è­‰æ–‡ä»¶ä¸æ‡‰æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
   - ä½¿ç”¨ `.gitignore` æ’é™¤æ•æ„Ÿæ–‡ä»¶

2. **API é‡‘é‘°**
   - ä½¿ç”¨ç’°å¢ƒè®Šæ•¸å­˜å„²
   - ä¸åœ¨ä»£ç¢¼ä¸­ç¡¬ç·¨ç¢¼

3. **OAuth æˆæ¬Š**
   - è‡ªå‹•åˆ·æ–° token
   - å®‰å…¨çš„ token å­˜å„²

4. **ç”¨æˆ¶æ•¸æ“š**
   - æœƒè©±ç‹€æ…‹éš”é›¢
   - ä¸æŒä¹…åŒ–æ•æ„Ÿè³‡è¨Š

## ğŸ“Š ç›£æ§èˆ‡æ—¥èªŒ

- **æ§åˆ¶å°è¼¸å‡º**ï¼šé—œéµæ­¥é©Ÿçš„æ—¥èªŒ
- **éŒ¯èª¤è™•ç†**ï¼šå‹å¥½çš„éŒ¯èª¤è¨Šæ¯
- **ç‹€æ…‹é¡¯ç¤º**ï¼šUI ä¸­é¡¯ç¤ºç•¶å‰ç‹€æ…‹

## ğŸ”® æœªä¾†æ“´å±•

å¯èƒ½çš„æ“´å±•æ–¹å‘ï¼š

1. **æ›´å¤šå·¥å…·**
   - æ–‡ä»¶è™•ç†å·¥å…·
   - æ•¸æ“šåˆ†æå·¥å…·
   - åœ–åƒè™•ç†å·¥å…·

2. **æ›´å¤šä»£ç†**
   - ä»»å‹™ç®¡ç†ä»£ç†
   - æ•¸æ“šåˆ†æä»£ç†
   - å…§å®¹ç”Ÿæˆä»£ç†

3. **å¢å¼·åŠŸèƒ½**
   - å¤šèªè¨€æ”¯æ´
   - èªéŸ³è¼¸å…¥/è¼¸å‡º
   - ç§»å‹•ç«¯æ‡‰ç”¨

4. **æ€§èƒ½å„ªåŒ–**
   - ä¸¦ç™¼å·¥å…·èª¿ç”¨
   - æ›´æ™ºèƒ½çš„ç·©å­˜
   - æ¨¡å‹é‡åŒ–å„ªåŒ–

