# æ¶æ§‹åˆ†é›¢èªªæ˜

> ğŸ“š **ç›¸é—œæ–‡æª”**ï¼š[ä¸» README](README.md) | [ç³»çµ±æ¶æ§‹](ARCHITECTURE.md) | [åŠŸèƒ½è©³è¿°](FEATURES.md)

æœ¬æ–‡æª”è©³ç´°èªªæ˜ Deep Agentic AI Tool ä¸­**æ·±åº¦ç ”ç©¶ä»£ç†**èˆ‡**Email/Calendar å·¥å…·**çš„æ¶æ§‹åˆ†é›¢è¨­è¨ˆã€‚

## ğŸ“‹ ç›®éŒ„

- [ç‚ºä»€éº¼è¦åˆ†é›¢ï¼Ÿ](#ç‚ºä»€éº¼è¦åˆ†é›¢)
- [ç³»çµ±æ¶æ§‹å°æ¯”](#ç³»çµ±æ¶æ§‹å°æ¯”)
- [æ·±åº¦ç ”ç©¶ä»£ç†ç³»çµ±](#æ·±åº¦ç ”ç©¶ä»£ç†ç³»çµ±)
- [Email/Calendar å·¥å…·ç³»çµ±](#emailcalendar-å·¥å…·ç³»çµ±)
- [å·¥å…·å°æ¯”](#å·¥å…·å°æ¯”)
- [å·¥ä½œæµç¨‹å°æ¯”](#å·¥ä½œæµç¨‹å°æ¯”)
- [å¦‚ä½•æ•´åˆï¼ˆå¯é¸ï¼‰](#å¦‚ä½•æ•´åˆå¯é¸)

## ğŸ¤” ç‚ºä»€éº¼è¦åˆ†é›¢ï¼Ÿ

### 1. **ä¸åŒçš„ä½¿ç”¨å ´æ™¯**

| ç‰¹æ€§ | æ·±åº¦ç ”ç©¶ä»£ç† | Email/Calendar å·¥å…· |
|------|------------|-------------------|
| **ä½¿ç”¨æ¨¡å¼** | å¤šæ­¥é©Ÿã€è¿­ä»£å¼ç ”ç©¶ | å–®æ¬¡æ“ä½œã€ç›´æ¥åŸ·è¡Œ |
| **è¤‡é›œåº¦** | éœ€è¦ä»»å‹™åˆ†è§£ã€å¤šè¼ªå·¥å…·èª¿ç”¨ | ç°¡å–®çš„è¼¸å…¥â†’è™•ç†â†’è¼¸å‡º |
| **ç‹€æ…‹ç®¡ç†** | éœ€è¦è¿½è¹¤ä»»å‹™ã€ç­†è¨˜ã€è¿­ä»£æ¬¡æ•¸ | ç„¡éœ€è¤‡é›œç‹€æ…‹è¿½è¹¤ |
| **ç”¨æˆ¶äº¤äº’** | æŸ¥çœ‹é€²åº¦ã€ç­‰å¾…æœ€çµ‚å ±å‘Š | å³æ™‚æŸ¥çœ‹çµæœã€å¯ç·¨è¼¯ |

### 2. **ä¸åŒçš„å·¥å…·é¡å‹**

- **ç ”ç©¶å·¥å…·**ï¼šç”¨æ–¼**æª¢ç´¢è³‡è¨Š**ï¼ˆè‚¡ç¥¨æ•¸æ“šã€ç¶²è·¯æœå°‹ã€PDF æŸ¥è©¢ï¼‰
- **æ“ä½œå·¥å…·**ï¼šç”¨æ–¼**åŸ·è¡Œæ“ä½œ**ï¼ˆç™¼é€éƒµä»¶ã€å‰µå»ºäº‹ä»¶ã€é©—è­‰åœ°é»ï¼‰

### 3. **ä¸åŒçš„å·¥ä½œæµéœ€æ±‚**

- **ç ”ç©¶ä»£ç†**ï¼šéœ€è¦ LangGraph çš„è¤‡é›œç·¨æ’ï¼ˆæ¢ä»¶è·¯ç”±ã€å¾ªç’°ã€ç‹€æ…‹ç®¡ç†ï¼‰
- **Email/Calendar**ï¼šç°¡å–®çš„å‡½æ•¸èª¿ç”¨å³å¯å®Œæˆ

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹å°æ¯”

### æ•´é«”æ¶æ§‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Gradio Web UI (gradio_interface.py)         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Research Tab â”‚  â”‚  Email Tab   â”‚  â”‚ Calendar Tab â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                  â”‚                  â”‚
    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Research       â”‚  â”‚  Email        â”‚  â”‚  Calendar     â”‚
    â”‚  Agent Graph    â”‚  â”‚  Functions    â”‚  â”‚  Functions    â”‚
    â”‚  (LangGraph)    â”‚  â”‚  (Direct)     â”‚  â”‚  (Direct)     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### èª¿ç”¨æ–¹å¼å°æ¯”

#### æ·±åº¦ç ”ç©¶ä»£ç†ï¼ˆä½¿ç”¨ LangGraphï¼‰

```python
# åœ¨ gradio_interface.py ä¸­
def run_research_agent(query: str, graph, thread_id: str = None):
    # ä½¿ç”¨ LangGraph åŸ·è¡Œè¤‡é›œå·¥ä½œæµ
    events = graph.stream(
        initial_state,
        config={"configurable": {"thread_id": thread_id}},
        stream_mode="updates"
    )
    # è™•ç†äº‹ä»¶æµ...
```

#### Email/Calendarï¼ˆç›´æ¥å‡½æ•¸èª¿ç”¨ï¼‰

```python
# åœ¨ gradio_interface.py ä¸­
def generate_draft(prompt, recipient):
    # ç›´æ¥èª¿ç”¨å‡½æ•¸ï¼Œç„¡éœ€åœ–è¡¨
    subject, body, status, reflection, needs_revision = generate_email_draft(
        prompt, recipient, enable_reflection=True
    )
    return subject, body, status, reflection
```

## ğŸ” æ·±åº¦ç ”ç©¶ä»£ç†ç³»çµ±

### æ¶æ§‹çµ„æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         agent_graph.py (LangGraph æ§‹å»º)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  START                                              â”‚
â”‚    â†“                                                â”‚
â”‚  Planner Node (planner.py)                          â”‚
â”‚    â†“                                                â”‚
â”‚  Research Agent Node (researcher.py)                â”‚
â”‚    â†“                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚  â”‚ Tools Node      â”‚ â† ä½¿ç”¨ get_tools_list()        â”‚
â”‚  â”‚ (ToolNode)      â”‚   åªåŒ…å«ç ”ç©¶å·¥å…·               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚    â†“                                                â”‚
â”‚  Note Taking Node (note_taker.py)                   â”‚
â”‚    â†“                                                â”‚
â”‚  Final Report Node (reporter.py)                    â”‚
â”‚    â†“                                                â”‚
â”‚  END                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä½¿ç”¨çš„å·¥å…·

**å®šç¾©ä½ç½®**ï¼š`deep_agent_rag/tools/agent_tools.py`

```python
def get_tools_list(rag_retriever=None):
    """åªè¿”å›ç ”ç©¶ç›¸é—œçš„å·¥å…·"""
    return [
        get_company_deep_info,  # è‚¡ç¥¨æŸ¥è©¢
        search_web,              # ç¶²è·¯æœå°‹
        query_pdf_knowledge     # PDF çŸ¥è­˜åº«
    ]
```

### å·¥å…·è©³è§£

1. **`get_company_deep_info`**
   - **é¡å‹**ï¼šè³‡è¨Šæª¢ç´¢
   - **åŠŸèƒ½**ï¼šæŸ¥è©¢è‚¡ç¥¨è©³ç´°æ•¸æ“š
   - **API**ï¼šyfinance

2. **`search_web`**
   - **é¡å‹**ï¼šè³‡è¨Šæª¢ç´¢
   - **åŠŸèƒ½**ï¼šç¶²è·¯æœå°‹æœ€æ–°è³‡è¨Š
   - **API**ï¼šTavily Search API

3. **`query_pdf_knowledge`**
   - **é¡å‹**ï¼šè³‡è¨Šæª¢ç´¢
   - **åŠŸèƒ½**ï¼šå¾ PDF çŸ¥è­˜åº«æª¢ç´¢è³‡è¨Š
   - **æŠ€è¡“**ï¼šRAG (Retrieval-Augmented Generation)

### ç‹€æ…‹ç®¡ç†

**å®šç¾©ä½ç½®**ï¼š`deep_agent_rag/agents/state.py`

```python
class DeepAgentState(TypedDict):
    query: str                    # ç”¨æˆ¶æŸ¥è©¢
    messages: list                # æ¶ˆæ¯æ­·å²
    tasks: list[str]              # ä»»å‹™åˆ—è¡¨
    completed_tasks: list[str]   # å·²å®Œæˆä»»å‹™
    research_notes: list[str]     # ç ”ç©¶ç­†è¨˜
    iteration: int                # è¿­ä»£æ¬¡æ•¸
```

### å·¥ä½œæµç¨‹ç‰¹é»

- âœ… **å¤šæ­¥é©Ÿè¿­ä»£**ï¼šPlanner â†’ Research â†’ Tools â†’ Note â†’ Report
- âœ… **æ¢ä»¶è·¯ç”±**ï¼šæ ¹æ“šç‹€æ…‹æ±ºå®šä¸‹ä¸€æ­¥
- âœ… **ç‹€æ…‹æŒä¹…åŒ–**ï¼šä½¿ç”¨ MemorySaver ä¿å­˜æœƒè©±
- âœ… **æµå¼è¼¸å‡º**ï¼šå³æ™‚æ›´æ–° UI

## ğŸ“§ Email/Calendar å·¥å…·ç³»çµ±

### æ¶æ§‹çµ„æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Gradio UI (gradio_interface.py)                    â”‚
â”‚    â†“                                                 â”‚
â”‚  ç›´æ¥èª¿ç”¨å‡½æ•¸ï¼ˆç„¡éœ€åœ–è¡¨ï¼‰                              â”‚
â”‚    â†“                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ email_agent.py   â”‚  â”‚ calendar_agent.pyâ”‚        â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚        â”‚
â”‚  â”‚ - generate_*     â”‚  â”‚ - generate_*     â”‚        â”‚
â”‚  â”‚ - send_*         â”‚  â”‚ - create_*         â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚           â”‚                    â”‚                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ email_tool.py     â”‚  â”‚ calendar_tool.pyâ”‚          â”‚
â”‚  â”‚                   â”‚  â”‚ googlemaps_tool.pyâ”‚         â”‚
â”‚  â”‚ - send_email()   â”‚  â”‚ - create_event()  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ - enrich_location()â”‚        â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Email ç³»çµ±

#### çµ„ä»¶

1. **`email_agent.py`**
   - `generate_email_draft()`ï¼šç”Ÿæˆéƒµä»¶è‰ç¨¿
   - `send_email_draft()`ï¼šç™¼é€éƒµä»¶
   - æ•´åˆ `email_reflection_agent.py` é€²è¡Œåæ€è©•ä¼°

2. **`email_tool.py`**
   - `send_email()`ï¼šä½¿ç”¨ Gmail API ç™¼é€éƒµä»¶

3. **`email_reflection_agent.py`**
   - `reflect_on_email()`ï¼šè©•ä¼°éƒµä»¶è³ªé‡
   - `generate_improved_email()`ï¼šç”Ÿæˆæ”¹é€²ç‰ˆæœ¬

#### å·¥ä½œæµç¨‹

```
ç”¨æˆ¶è¼¸å…¥ â†’ generate_email_draft()
              â†“
         Email Reflection (å¯é¸)
              â†“
         è¿”å›è‰ç¨¿çµ¦ç”¨æˆ¶
              â†“
         ç”¨æˆ¶ç·¨è¼¯ç¢ºèª
              â†“
         send_email_draft()
              â†“
         email_tool.send_email()
              â†“
         Gmail API ç™¼é€
```

### Calendar ç³»çµ±

#### çµ„ä»¶

1. **`calendar_agent.py`**
   - `generate_calendar_draft()`ï¼šç”Ÿæˆäº‹ä»¶è‰ç¨¿
   - `create_calendar_draft()`ï¼šå‰µå»ºäº‹ä»¶
   - æ•´åˆ `calendar_reflection_agent.py` é€²è¡Œåæ€è©•ä¼°
   - æ•´åˆ `googlemaps_tool.py` é€²è¡Œåœ°é»é©—è­‰

2. **`calendar_tool.py`**
   - `create_calendar_event()`ï¼šä½¿ç”¨ Google Calendar API å‰µå»ºäº‹ä»¶
   - `update_calendar_event()`ï¼šæ›´æ–°äº‹ä»¶
   - `delete_calendar_event()`ï¼šåˆªé™¤äº‹ä»¶

3. **`googlemaps_tool.py`**
   - `enrich_location_info()`ï¼šåœ°é»é©—è­‰èˆ‡æ¨™æº–åŒ–
   - è¨ˆç®—äº¤é€šæ™‚é–“
   - å»ºè­°å‡ºç™¼æ™‚é–“

4. **`calendar_reflection_agent.py`**
   - `reflect_on_calendar_event()`ï¼šè©•ä¼°äº‹ä»¶å®Œæ•´æ€§
   - `generate_improved_calendar_event()`ï¼šç”Ÿæˆæ”¹é€²ç‰ˆæœ¬

#### å·¥ä½œæµç¨‹

```
ç”¨æˆ¶è¼¸å…¥ â†’ generate_calendar_draft()
              â†“
         Google Maps é©—è­‰åœ°é»ï¼ˆå¯é¸ï¼‰
              â†“
         Calendar Reflection (æœ€å¤š 3 è¼ª)
              â†“
         æª¢æŸ¥ç¼ºå¤±è³‡è¨Š
              â†“
         è¿”å›è‰ç¨¿çµ¦ç”¨æˆ¶
              â†“
         ç”¨æˆ¶ç·¨è¼¯ç¢ºèª
              â†“
         create_calendar_draft()
              â†“
         calendar_tool.create_calendar_event()
              â†“
         Google Calendar API å‰µå»º
```

## ğŸ”§ å·¥å…·å°æ¯”

### å·¥å…·åˆ†é¡

| é¡åˆ¥ | ç ”ç©¶å·¥å…· | Email/Calendar å·¥å…· |
|------|---------|-------------------|
| **å®šç¾©ä½ç½®** | `tools/agent_tools.py` | `tools/email_tool.py`<br>`tools/calendar_tool.py`<br>`tools/googlemaps_tool.py` |
| **ç”¨é€”** | è³‡è¨Šæª¢ç´¢ | æ“ä½œåŸ·è¡Œ |
| **è¿”å›é¡å‹** | è³‡è¨Š/æ•¸æ“š | æ“ä½œçµæœï¼ˆæˆåŠŸ/å¤±æ•—ï¼‰ |
| **æ˜¯å¦åœ¨åœ–è¡¨ä¸­** | âœ… æ˜¯ï¼ˆé€šé `get_tools_list()`ï¼‰ | âŒ å¦ï¼ˆç›´æ¥èª¿ç”¨ï¼‰ |

### å·¥å…·åˆ—è¡¨å°æ¯”

#### ç ”ç©¶å·¥å…·ï¼ˆåœ¨ `agent_graph.py` ä¸­ï¼‰

```python
# åœ¨ agent_graph.py ä¸­
tools_list = get_tools_list(rag_retriever)
# è¿”å›ï¼š
# [
#   get_company_deep_info,  # è‚¡ç¥¨æŸ¥è©¢
#   search_web,              # ç¶²è·¯æœå°‹
#   query_pdf_knowledge     # PDF çŸ¥è­˜åº«
# ]

builder.add_node("tools", ToolNode(tools_list))
```

#### Email/Calendar å·¥å…·ï¼ˆä¸åœ¨ `agent_graph.py` ä¸­ï¼‰

```python
# åœ¨ email_agent.py ä¸­ç›´æ¥å°å…¥
from ..tools.email_tool import send_email

# åœ¨ calendar_agent.py ä¸­ç›´æ¥å°å…¥
from ..tools.calendar_tool import create_calendar_event, ...
from ..tools.googlemaps_tool import enrich_location_info
```

## ğŸ”„ å·¥ä½œæµç¨‹å°æ¯”

### æ·±åº¦ç ”ç©¶ä»£ç†å·¥ä½œæµç¨‹

```
1. ç”¨æˆ¶è¼¸å…¥æŸ¥è©¢
   â†“
2. Planner åˆ†æä¸¦ç”Ÿæˆä»»å‹™åˆ—è¡¨
   â†“
3. Research Agent é¸æ“‡å·¥å…·
   â†“
4. Tools Node åŸ·è¡Œå·¥å…·èª¿ç”¨
   â†“
5. Research Agent è™•ç†çµæœ
   â†“
6. Note Taking æ•´ç†ç­†è¨˜
   â†“
7. æª¢æŸ¥æ˜¯å¦é‚„æœ‰ä»»å‹™
   â”œâ”€ æ˜¯ â†’ è¿”å›æ­¥é©Ÿ 3
   â””â”€ å¦ â†’ ç¹¼çºŒ
   â†“
8. Final Report ç”Ÿæˆå ±å‘Š
   â†“
9. è¿”å›çµæœ
```

**ç‰¹é»**ï¼š
- å¤šæ­¥é©Ÿè¿­ä»£
- éœ€è¦ç‹€æ…‹ç®¡ç†
- æ¢ä»¶è·¯ç”±
- æµå¼è¼¸å‡º

### Email å·¥ä½œæµç¨‹

```
1. ç”¨æˆ¶è¼¸å…¥æç¤ºå’Œæ”¶ä»¶äºº
   â†“
2. generate_email_draft() ç”Ÿæˆè‰ç¨¿
   â†“
3. Email Reflection è©•ä¼°ï¼ˆå¯é¸ï¼‰
   â†“
4. è¿”å›è‰ç¨¿çµ¦ç”¨æˆ¶
   â†“
5. ç”¨æˆ¶ç·¨è¼¯ç¢ºèª
   â†“
6. send_email_draft() ç™¼é€
   â†“
7. email_tool.send_email() èª¿ç”¨ Gmail API
   â†“
8. è¿”å›çµæœ
```

**ç‰¹é»**ï¼š
- å–®æ¬¡æ“ä½œ
- ç„¡éœ€è¤‡é›œç‹€æ…‹
- ç›´æ¥å‡½æ•¸èª¿ç”¨
- å³æ™‚è¿”å›

### Calendar å·¥ä½œæµç¨‹

```
1. ç”¨æˆ¶è¼¸å…¥äº‹ä»¶æç¤º
   â†“
2. generate_calendar_draft() ç”Ÿæˆè‰ç¨¿
   â†“
3. Google Maps é©—è­‰åœ°é»ï¼ˆå¯é¸ï¼‰
   â†“
4. Calendar Reflection è©•ä¼°ï¼ˆæœ€å¤š 3 è¼ªï¼‰
   â†“
5. æª¢æŸ¥ç¼ºå¤±è³‡è¨Š
   â†“
6. è¿”å›è‰ç¨¿çµ¦ç”¨æˆ¶
   â†“
7. ç”¨æˆ¶ç·¨è¼¯ç¢ºèª
   â†“
8. create_calendar_draft() å‰µå»º
   â†“
9. calendar_tool.create_calendar_event() èª¿ç”¨ API
   â†“
10. è¿”å›çµæœ
```

**ç‰¹é»**ï¼š
- å–®æ¬¡æ“ä½œï¼ˆä½†æœ‰å¤šè¼ªåæ€ï¼‰
- æ•´åˆå¤šå€‹å·¥å…·ï¼ˆCalendar + Mapsï¼‰
- ç›´æ¥å‡½æ•¸èª¿ç”¨
- å³æ™‚è¿”å›

## ğŸ”— å¦‚ä½•æ•´åˆï¼ˆå¯é¸ï¼‰

å¦‚æœæ‚¨æƒ³è®“ç ”ç©¶ä»£ç†ä¹Ÿèƒ½ä½¿ç”¨ Email/Calendar å·¥å…·ï¼Œå¯ä»¥é€™æ¨£åšï¼š

### æ­¥é©Ÿ 1ï¼šå°‡å·¥å…·æ·»åŠ åˆ° `get_tools_list()`

```python
# åœ¨ tools/agent_tools.py ä¸­
from ..tools.email_tool import send_email
from ..tools.calendar_tool import create_calendar_event

def get_tools_list(rag_retriever=None, include_actions=False):
    """ç²å–å·¥å…·åˆ—è¡¨"""
    research_tools = [
        get_company_deep_info,
        search_web,
        query_pdf_knowledge
    ]
    
    if include_actions:
        action_tools = [
            send_email,
            create_calendar_event
        ]
        return research_tools + action_tools
    
    return research_tools
```

### æ­¥é©Ÿ 2ï¼šåœ¨ `agent_graph.py` ä¸­å‚³å…¥åƒæ•¸

```python
# åœ¨ graph/agent_graph.py ä¸­
def build_agent_graph(rag_retriever=None, include_actions=False):
    # ç²å–å·¥å…·åˆ—è¡¨ï¼ˆåŒ…å«æ“ä½œå·¥å…·ï¼‰
    tools_list = get_tools_list(rag_retriever, include_actions=include_actions)
    # ...
```

### æ­¥é©Ÿ 3ï¼šç ”ç©¶ä»£ç†å¯ä»¥èª¿ç”¨é€™äº›å·¥å…·

ç ”ç©¶ä»£ç†ç¾åœ¨å¯ä»¥ï¼š
- åœ¨ç ”ç©¶éç¨‹ä¸­ç™¼é€éƒµä»¶é€šçŸ¥
- åœ¨ç ”ç©¶å®Œæˆå¾Œå‰µå»ºè¡Œäº‹æ›†äº‹ä»¶æé†’
- æ ¹æ“šç ”ç©¶çµæœè‡ªå‹•å®‰æ’æœƒè­°

### æ³¨æ„äº‹é …

âš ï¸ **æ•´åˆæ™‚éœ€è¦è€ƒæ…®**ï¼š

1. **æ¬Šé™ç®¡ç†**ï¼šç ”ç©¶ä»£ç†èª¿ç”¨æ“ä½œå·¥å…·éœ€è¦è¬¹æ…ï¼Œé¿å…èª¤æ“ä½œ
2. **ç”¨æˆ¶ç¢ºèª**ï¼šæ“ä½œå·¥å…·å¯èƒ½éœ€è¦ç”¨æˆ¶ç¢ºèªï¼Œä¸é©åˆè‡ªå‹•åŸ·è¡Œ
3. **å·¥å…·é¸æ“‡**ï¼šç ”ç©¶ä»£ç†éœ€è¦èƒ½å¤ æ­£ç¢ºè­˜åˆ¥ä½•æ™‚ä½¿ç”¨æ“ä½œå·¥å…·
4. **éŒ¯èª¤è™•ç†**ï¼šæ“ä½œå·¥å…·å¤±æ•—æ™‚çš„è™•ç†ç­–ç•¥

## ğŸ“Š ç¸½çµå°æ¯”è¡¨

| ç‰¹æ€§ | æ·±åº¦ç ”ç©¶ä»£ç† | Email/Calendar å·¥å…· |
|------|------------|-------------------|
| **æ¶æ§‹** | LangGraph åœ–è¡¨ | ç›´æ¥å‡½æ•¸èª¿ç”¨ |
| **å·¥å…·é¡å‹** | è³‡è¨Šæª¢ç´¢ | æ“ä½œåŸ·è¡Œ |
| **ç‹€æ…‹ç®¡ç†** | è¤‡é›œï¼ˆDeepAgentStateï¼‰ | ç°¡å–®ï¼ˆå‡½æ•¸åƒæ•¸ï¼‰ |
| **å·¥ä½œæµ** | å¤šæ­¥é©Ÿè¿­ä»£ | å–®æ¬¡æ“ä½œ |
| **å·¥å…·ç¶å®š** | é€šé `get_tools_list()` | ç›´æ¥å°å…¥èª¿ç”¨ |
| **UI æ›´æ–°** | æµå¼æ›´æ–° | å³æ™‚è¿”å› |
| **é©ç”¨å ´æ™¯** | è¤‡é›œç ”ç©¶ä»»å‹™ | ç°¡å–®æ“ä½œä»»å‹™ |

## ğŸ’¡ è¨­è¨ˆå„ªå‹¢

1. **æ¨¡çµ„åŒ–**ï¼šå„ç³»çµ±ç¨ç«‹ï¼Œæ˜“æ–¼ç¶­è­·å’Œæ“´å±•
2. **æ¸…æ™°è·è²¬**ï¼šæ¯å€‹ç³»çµ±å°ˆæ³¨è‡ªå·±çš„åŠŸèƒ½
3. **æ€§èƒ½å„ªåŒ–**ï¼šç°¡å–®æ“ä½œä¸éœ€è¦è¤‡é›œçš„åœ–è¡¨é–‹éŠ·
4. **éˆæ´»æ€§**ï¼šå¯ä»¥é¸æ“‡æ€§åœ°æ•´åˆåŠŸèƒ½
5. **æ˜“æ–¼æ¸¬è©¦**ï¼šå„ç³»çµ±å¯ä»¥ç¨ç«‹æ¸¬è©¦

## ğŸ”® æœªä¾†æ“´å±•

å¦‚æœéœ€è¦æ•´åˆï¼Œå¯ä»¥è€ƒæ…®ï¼š

1. **å‰µå»ºçµ±ä¸€çš„å·¥å…·è¨»å†Šç³»çµ±**
2. **å¯¦ç¾å·¥å…·æ¬Šé™ç®¡ç†**
3. **æ·»åŠ å·¥å…·ä½¿ç”¨æ—¥èªŒ**
4. **å¯¦ç¾å·¥å…·çµ„åˆç­–ç•¥**

---

**çµè«–**ï¼šæ¶æ§‹åˆ†é›¢æ˜¯åˆç†çš„è¨­è¨ˆé¸æ“‡ï¼Œä½¿ç³»çµ±æ›´åŠ æ¸…æ™°ã€æ¨¡çµ„åŒ–å’Œæ˜“æ–¼ç¶­è­·ã€‚å¦‚æœéœ€è¦æ•´åˆï¼Œå¯ä»¥æŒ‰ç…§ä¸Šè¿°æ­¥é©Ÿé€²è¡Œï¼Œä½†éœ€è¦è¬¹æ…è€ƒæ…®æ¬Šé™å’Œç”¨æˆ¶é«”é©—ã€‚

